{
  "name": "node-bugzilla",
  "version": "0.1.0",
  "description": "A node module to make filing bugs in node apps easy",
  "author": {
    "name": "David Humphrey",
    "email": "david.humphrey@senecacollege.ca"
  },
  "main": "index.js",
  "repository": {
    "type": "git",
    "url": "git://github.com/humphd/node-bugzilla.git"
  },
  "keywords": [
    "bugzilla",
    "crash",
    "bug",
    "express",
    "middleware",
    "connect"
  ],
  "dependencies": {
    "bz": "~0.2.5"
  },
  "license": {
    "type": "Apache",
    "url": "http://www.apache.org/licenses/LICENSE-2.0.html"
  },
  "gitHead": "29eea6ac31e36d5d848b3ef7b77bb8da3e337145",
  "readme": "# node-bugzilla\n\nA node module that makes it easy to file bugs automatically from node and Express apps.\n\n# Overview\n\nWhen an uncaught exception happens in a node app, `node-bugzilla` handles it and confirms that there is a bug filed in Bugzilla for this crash. Crashes are identified by their summary, which includes an optional user supplied prefix (e.g., \"[Crash:my-app]\"), an error message (the value of `err.message`) and the filename and line number of the crash's top frame. Bugs are only filed once, and additional crashes in the same location will not fill-up your Bugzilla server with duplicates.\n\n# Install\nFor [node](http://nodejs.org) install with [npm](http://npmjs.org):\n\n```\nnpm install node-bugzilla\n```\n\n# Usage\n\nTo use `node-bugzilla` in your app, first require it, and create an instance by connecting to a [Bugzilla REST API](https://wiki.mozilla.org/Bugzilla:REST_API):\n\n```javascript\nvar bugzilla = require( 'node-bugzilla' ).connect({\n  url: \"https://api-dev.bugzilla.mozilla.org/test/1.3/\",\n  username: \"user\",\n  password: \"secret\",\n  defaults: {\n    \"product\": \"My Bugzilla Product\",\n    \"component\": \"My Bugzilla Component\"\n  }\n});\n\nbugzilla.handleUncaughtExceptions( '[Crash:my-app]', function( err, result ) {\n  if ( err ) {\n    console.log( 'Crash, node-bugzilla unable to file bug in bugzilla.' );\n    return;\n  }\n\n  console.log( \"Crash, Bug #\" + result.bug );\n  console.log( result.err.stack );\n});\n```\n\nIn the above example, a connection is made to the Mozilla Bugzilla test instance. A number of default fields are specified, which will be used when creating new bugs (note: `product` and `component` are required, and you can specify [other fields](https://wiki.mozilla.org/Bugzilla:REST_API:Objects#Bug)).\n\nWith the `bugzilla` object, you can enable global exeception handling using `handleUncaughtExceptions`, such that all crashes create new bugs (or confirm one is already filed--only 1 bug will ever be filed for a given crash). You can optionally specify a `prefix` to add to any bug's summary, for example: [Crash:my-app]. You can also provide an optional callback, which will get the unhandled error as well as the bug number that is filed against it. If your callback itself causes an unhandled exception, no bug will be filed.\n\n# Methods\n\n## connect( options, [callback] )\n\nThe `connect` method must be called first. It creates and returns an instance. It expects a number of options, and an optional callback:\n\n* `url` - the Bugzilla REST API url to use, for example https://api-dev.bugzilla.mozilla.org/1.3/ (see [Bugzilla REST API](https://wiki.mozilla.org/Bugzilla:REST_API))\n* `username` - a Bugzilla username\n* `password` - the user's password\n* `defaults` - an `Object` list of bug [fields](https://wiki.mozilla.org/Bugzilla:REST_API:Objects#Bug) and their values to use when creating new bugs. Only the `product` and `component` fields are necessary, but any valid field can be specified. Default values will be used for The `platform` (All), `op_sys` (All), `severity` (normal), `version` (1.0), and `priority` (P2) fields if left absent, since Bugzilla expects them to be specified.\n\nYou can also specify an optional `callback` function in order to make sure that your instance is properly connected (the `connect` method tries to connect to the url and with the given username/password):\n\n```javascript\nvar bugzilla = require( 'node-bugzilla' ).connect({\n  url: \"https://api-dev.bugzilla.mozilla.org/1.3/\",\n  username: \"user\",\n  password: \"secret\",\n  defaults: {\n    \"product\": \"My Bugzilla Product\",\n    \"component\": \"My Bugzilla Component\"\n  }\n},\nfunction( err ) {\n  if ( err ) {\n    console.log( 'node-bugzilla unable to connect to server.' );\n  } else {\n    console.log( 'node-bugzilla connected to server.' );\n  }\n});\n```\n\n## handleUncaughtExceptions( [prefix], [callback] )\n\nOnce `connect` has been called, and you have an instance, you can call the `handleUncaughtExceptions` method. It can optionally be passed a `prefix` and a `callback`. The `prefix` is a string to add to the summary of any bugs filed, and is useful for indicating the name of your app.\n\nThe `callback` will receive two arguments, an error message, and a crash report:\n\n* `error` - either a `String` indicating that the connection to bugzilla didn't work, or nothing if successful.\n* `report` - an `Object` with an `err` property (the uncaught exception), and a `bug` property (the bug's id that was filed for this issue).\n\n# Testing\n\nYou can try `node-bugzilla` using Mozilla's test server:\n\n* Web: http://landfill.bugzilla.org/bzapi_sandbox/\n* API: https://api-dev.bugzilla.mozilla.org/test/1.3/ or https://api-dev.bugzilla.mozilla.org/test/latest/\n\nThe URL you provide with your options to `connect` needs to be the API endpoint, not the Web URL.\n\n# License\n\nCopyright 2013 David Humphrey david.humphrey@senecacollege.ca\n\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License. You may obtain a copy of the License at\n\nhttp://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.\n",
  "readmeFilename": "README.md",
  "bugs": {
    "url": "https://github.com/humphd/node-bugzilla/issues"
  },
  "homepage": "https://github.com/humphd/node-bugzilla",
  "_id": "node-bugzilla@0.1.0",
  "_shasum": "c26b050d4a6e7d9ae0e23457efe8f8ab744508c9",
  "_from": "git+https://github.com/humphd/node-bugzilla.git",
  "_resolved": "git+https://github.com/humphd/node-bugzilla.git#29eea6ac31e36d5d848b3ef7b77bb8da3e337145"
}
